__author__ = 'amrit'

import matplotlib.pyplot as plt
import os, pickle
import operator
import numpy as np
import matplotlib.cm as cmx
import matplotlib.colors as colors

if __name__ == '__main__':
    '''F_final = {}
    F_final1={}
    fileB = ['pitsA', 'pitsB', 'pitsC', 'pitsD', 'pitsE', 'pitsF']
    path = '/home/amrit/GITHUB/Pits_lda/src/07-21/dump/untuned'
    for root, dirs, files in os.walk(path, topdown=False):
        for name in files:
            a = os.path.join(root, name)
            with open(a, 'rb') as handle:
                F_final = {}
                F_final = pickle.load(handle)
                # print(F_final)
                F_final1 = dict(F_final1.items() + F_final.items())
    print(F_final1)'''
    de={'SE0': {'tf': {'no_shingle': [0.63574660633484159, 0.61846496106785309, 0.63666300768386386, 0.66971428571428571, 0.62940461725394892, 0.60591133004926101, 0.63041065482796887, 0.63519313304721026, 0.64961067853170185, 0.64538198403648805, 0.63625450180072018, 0.65494505494505506, 0.62053056516724325, 0.61899179366940216, 0.62597114317425073, 0.65297297297297296, 0.59106529209622005, 0.65893271461716929, 0.64388092613009928, 0.61538461538461542, 0.59999999999999998, 0.6289445048966269, 0.65207877461706787, 0.65315852205005975, 0.61865407319952781]}}, 'SE6': {'tf': {'no_shingle': [0.71203703703703713, 0.71395240317312192, 0.69405099150141636, 0.67902439024390238, 0.70460959548447788, 0.72065514103730666, 0.72091954022988514, 0.69586614173228345, 0.70571563533301851, 0.69990680335507927, 0.70986183897093846, 0.70415879017013228, 0.73157415832575057, 0.71166827386692377, 0.71144749290444653, 0.70047393364928923, 0.70764899108399804, 0.72064393939393945, 0.72549019607843135, 0.71374407582938393, 0.7000481463649495, 0.69623655913978488, 0.70992007522331924, 0.71265461465271185, 0.71516296646197453]}}, 'SE3': {'tf': {'no_shingle': [0.71525688175638014, 0.71689242135900588, 0.70441501103752768, 0.71296086858176877, 0.71097615834457939, 0.71479342514438016, 0.70730103047577286, 0.70949477351916368, 0.71552014364268868, 0.71248724055801294, 0.711378044711378, 0.7164570803717879, 0.71265678449258829, 0.71239688100350307, 0.72342793544796902, 0.72211803640375072, 0.71541988147154201, 0.71999999999999986, 0.72036541889483063, 0.71029529130087787, 0.70618789521228553, 0.71335284845755453, 0.71667602470522174, 0.70992028343666969, 0.71018334437817532]}}, 'SE1': {'tf': {'no_shingle': [0.99970451070827504, 0.99970450311556491, 0.99978160048304832, 0.99973020542929447, 0.99978160048304832, 0.9997944607163044, 0.99973020542929447, 0.99978160048304832, 0.99980730444612875, 0.99974304948866854, 0.99961454452010801, 0.99973020542929447, 0.99974304948866854, 0.99979445543536904, 0.99978160048304832, 0.99976876236479018, 0.99970450311556491, 0.99978160048304832, 0.99964024155210074, 0.99980729949512459, 0.99975591269382458, 0.99976875642343255, 0.99970449552246476, 0.99980730444612875, 0.99970449552246476]}}, 'SE8': {'tf': {'no_shingle': [0.70755704416998133, 0.70930726731831695, 0.71401554948518597, 0.7145448724789244, 0.71131447587354413, 0.71154863977982419, 0.72390285470813809, 0.71744419760922462, 0.70135557872784149, 0.71222866967547804, 0.71731374606505771, 0.71895013123359575, 0.71277271764456684, 0.71152621524092552, 0.72072265835036031, 0.71924290220820186, 0.71518987341772156, 0.70351652979574641, 0.71027244778967458, 0.71804590440092653, 0.70623328533223617, 0.71150139216106234, 0.71920364993778507, 0.72076677316293924, 0.71836476662100934]}}}
    untuned={'SE6': {'tf': {'no_shingle': [0.53197278911564627, 0.5781671159029651, 0.56309263311451507, 0.5442359249329759, 0.56673511293634504, 0.54227812718378754, 0.55684138869979571, 0.56945404284727019, 0.57123473541383984, 0.53862815884476545, 0.53819201121233351, 0.56650585802894549, 0.58294157152451309, 0.54934437543133197, 0.54719562243502051, 0.57756883814640703, 0.53760238272524197, 0.5575757575757575, 0.57854671280276815, 0.56451612903225812, 0.51428571428571435, 0.58064516129032262, 0.50271739130434778, 0.57449856733524363, 0.54520734194425569]}}, 'SE8': {'tf': {'no_shingle': [0.76246846497186116, 0.74889698829848461, 0.74835761211082541, 0.7500240824583374, 0.74819728872223823, 0.74743167280480716, 0.74435797665369652, 0.75281873373807462, 0.75499758570738773, 0.75158501440922199, 0.75369600927625846, 0.75592371412059345, 0.75482940893801065, 0.7534631405599147, 0.75009596928982725, 0.75498848810437447, 0.75479372457873328, 0.75454012888107791, 0.75076277650648371, 0.74469098181125615, 0.74587845088284066, 0.75197503169803959, 0.74772154353306197, 0.76557692307692304, 0.74877226769378924]}}, 'SE3': {'tf': {'no_shingle': [0.79961847229949923, 0.80679672750157327, 0.80898699251083961, 0.81216888746187188, 0.8008846062712266, 0.81039491245976281, 0.80955403904142198, 0.80635172687574419, 0.8080160320641282, 0.80718544085346722, 0.81334279630943929, 0.80673069291213584, 0.80064051240992795, 0.81085842408712372, 0.81015435242497857, 0.80741503604531417, 0.80351071400332097, 0.80482158537558879, 0.81231302157140617, 0.8050203853225677, 0.80499882103277531, 0.81592586775561482, 0.81534159009188978, 0.80185288714958858, 0.80650535501785003]}}, 'SE1': {'tf': {'no_shingle': [0.81200353045013252, 0.81514878268710556, 0.80819202818762392, 0.80539675280128065, 0.80862718247175613, 0.81121537086684536, 0.80518904534870828, 0.81301369863013706, 0.80933333333333324, 0.80471116096466633, 0.80888183980967487, 0.80210432057309144, 0.82465317261769389, 0.80915018234059022, 0.81091356368109124, 0.79427228996532051, 0.80667779632721193, 0.8211995048947901, 0.80638225642186256, 0.80616346583296095, 0.80008949546929198, 0.81993713515940736, 0.81404864741986804, 0.80877251874230727, 0.80570092417325456]}}, 'SE0': {'tf': {'no_shingle': [0.73280000000000001, 0.68095630667765872, 0.71987230646448519, 0.68197278911564618, 0.69696969696969691, 0.72422464375523887, 0.70771628994544034, 0.70826580226904379, 0.70219966159052449, 0.6923076923076924, 0.680577849117175, 0.71037344398340252, 0.72536348949919227, 0.729528535980149, 0.65381526104417675, 0.73741285824941905, 0.73182552504038778, 0.68593750000000009, 0.70149253731343286, 0.71589921807124246, 0.66937449228269708, 0.71172638436482083, 0.71614384085692417, 0.72040302267002521, 0.70076726342711004]}}}
    baseline={'SE6': {'tf': {'no_shingle': [0.64255910987482623, 0.65229110512129374, 0.65368567454798332, 0.66086956521739137, 0.66180758017492713, 0.6696562032884904, 0.6384180790960452, 0.6370597243491577, 0.64535768645357683, 0.70541611624834866, 0.62446043165467624, 0.66850828729281775, 0.63492063492063489, 0.63173216885007277, 0.67219917012448138, 0.6831275720164609, 0.61849710982658956, 0.63142857142857145, 0.64722222222222214, 0.62551440329218111, 0.6574202496532594, 0.61731843575418988, 0.66666666666666674, 0.64347826086956517, 0.65101721439749605]}}, 'SE0': {'tf': {'no_shingle': [0.65740740740740744, 0.67126436781609189, 0.71367521367521369, 0.69281045751633985, 0.70207852193995379, 0.67720090293453727, 0.72768878718535468, 0.70535714285714279, 0.70852017937219725, 0.69506726457399115, 0.74509803921568629, 0.73008849557522115, 0.65759637188208619, 0.74042553191489369, 0.72429906542056066, 0.73043478260869554, 0.72197309417040356, 0.69461077844311381, 0.65048543689320393, 0.71264367816091956, 0.70069605568445481, 0.72258064516129028, 0.71964679911699769, 0.72151898734177211, 0.69425287356321841]}}, 'SE3': {'tf': {'no_shingle': [0.44286979627989376, 0.39461883408071746, 0.45484949832775923, 0.4403361344537815, 0.41373239436619719, 0.45873153779322329, 0.43589743589743585, 0.3996415770609319, 0.42832764505119458, 0.39677419354838717, 0.42154566744730682, 0.41129744042365401, 0.43330501274426508, 0.4637404580152672, 0.43321299638989164, 0.4274265360641139, 0.39966694421315563, 0.41459074733096085, 0.42680776014109351, 0.44127516778523496, 0.40669456066945608, 0.38793103448275862, 0.42932862190812726, 0.42907180385288973, 0.41506129597197899]}}, 'SE1': {'tf': {'no_shingle': [0.67248545303408158, 0.6875773834089971, 0.67334167709637049, 0.64333333333333342, 0.66032843560933452, 0.67340918668352301, 0.68139337298215796, 0.64885177453027143, 0.66916666666666658, 0.65953067105804852, 0.67573310667233311, 0.64231738035264474, 0.65866776996276377, 0.64009962640099616, 0.6775911511675542, 0.65772357723577235, 0.67581047381546133, 0.689308176100629, 0.67195767195767209, 0.67584480600750929, 0.67450650986980254, 0.68097643097643101, 0.65976714100905565, 0.68010291595197248, 0.65698587127158548]}}, 'SE8': {'tf': {'no_shingle': [0.47588424437299032, 0.35862068965517241, 0.40894568690095845, 0.40845070422535212, 0.38271604938271608, 0.44444444444444442, 0.4157706093189964, 0.3848580441640379, 0.48192771084337344, 0.33793103448275857, 0.34267912772585668, 0.37308868501529052, 0.40531561461794019, 0.45205479452054792, 0.40125391849529779, 0.39597315436241615, 0.40000000000000002, 0.43887147335423199, 0.45859872611464969, 0.34951456310679618, 0.39528023598820061, 0.44604316546762585, 0.42384105960264901, 0.40549828178694153, 0.33444816053511706]}}}

    fileB = ['SE0', 'SE6', 'SE3', 'SE8', 'SE1']
    #labels = [1, 2, 3, 4, 5, 6, 7, 8, 9]


    temp=[]
    temp1=[]
    temp2=[]
    temp3=[]
    temp4=[]
    temp5=[]
    for file in fileB:
        temp.append(np.median(de[file]['tf']['no_shingle']))
        temp1.append(np.median(baseline[file]['tf']['no_shingle']))
        temp2.append(np.median(untuned[file]['tf']['no_shingle']))

        temp3.append(np.percentile(de[file]['tf']['no_shingle'],75)-np.percentile(de[file]['tf']['no_shingle'],25))
        temp4.append(np.percentile(baseline[file]['tf']['no_shingle'],75)-np.percentile(baseline[file]['tf']['no_shingle'],25))
        temp5.append(np.percentile(untuned[file]['tf']['no_shingle'],75)-np.percentile(untuned[file]['tf']['no_shingle'],25))
    median={}
    median['baseline']=temp1
    median['untuned']=temp2
    median['tuned']=temp
    iqr={}
    iqr['baseline']=temp4
    iqr['untuned']=temp5
    iqr['tuned']=temp3
    font = {'family' : 'normal',
            'weight' : 'bold',
            'size'   : 70}

    plt.rc('font', **font)
    paras={'lines.linewidth': 8,'legend.fontsize': 60, 'axes.labelsize': 70, 'legend.frameon': False,'figure.autolayout': True,'figure.figsize': (16,8)}
    plt.rcParams.update(paras)
    X = range(len(fileB))
    plt.figure(num=0, figsize=(40, 25))
    #plt.subplot(121)
    results=['baseline','untuned','tuned']
    for res in results:
        line, = plt.plot(X, median[res], marker='o', markersize=16, label=res+'_median')
        plt.plot(X, iqr[res], linestyle="-.", color=line.get_color(), marker='*', markersize=16, label=res + '_iqr')


    #plt.ylim(-0.1,1.1)

    plt.xticks(X, fileB)
    plt.ylabel("F_score")
    plt.xlabel("Datasets")
    plt.legend(bbox_to_anchor=(0.3, 0.8), loc=1, ncol = 1, borderaxespad=0.)
    plt.savefig("graph" + ".png")